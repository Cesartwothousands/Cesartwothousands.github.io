<!DOCTYPE html>
<html lang="en">
<head>
    <title>Zihan Chen - Ph.D. Student in Rutgers University</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Zihan Chen is a PhD student in Computer Science and Quantum Computing at Rutgers University. He is interested in quantum computer architecture and compiler design for quantum computing. His advisor is Prof. Eddy Z. Zhang. He has published several papers in quantum computing and computer architecture such as Genesis and PhasePoly in ISCA'2025 and QCE'2025.">
    <meta name="keywords" content="Zihan Chen,Ph.D. Student,Rutgers University,Computer System,Quantum Computing,Computer Architecture,Compiler,ISCA,MICRO,QCE">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="static/image/logos/quantum.png">

    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
body{margin:0;padding:0;}
a{color:rgba(1, 70, 0, 0.676)}
a:hover{color:#0d5797}
#background{position:fixed;top:0;overflow:hidden;height:0}
#wave-canvas{display:block;position:relative;top:0;left:5%;width:55%;min-width:850px;height:150px;border:0}
/*#main{z-index:2;margin:0 auto;position:absolute;padding-top:5%;width:100%;min-width:240px;text-align:center;background-color:rgb(254,250,246)}*/
#main{margin:0 auto;padding:45px 30px 15px;width:100%;min-width:240px;text-align:center;background-color:white}

.main-content{padding:0;text-align:center;cursor:default;text-align:center;}
/*#main-content{background:rgba(238,238,238,0.95);padding:0;text-align:center;cursor:default;text-align:center;}*/
/*.main-content{margin-left:6.5104167%;width:86.9791667%;}*/
@media (min-width: 768px) {
    .main-content{width:66%;min-width:668px;margin:auto;}
}
@media (min-width: 1200px) {
    .main-content{width:66%;max-width:900px;margin:auto;}
}
/*.main-content {
    width:86.9791667%;
    margin: 0 auto;
}
@media (min-width: 768px) {
    .main-content{width:66%;min-width:668px;}
}
@media (min-width: 1200px) {
    .main-content{width:66%;max-width:900px;}
}*/
/* Avatar, Name, etc. */
#main-content-container{margin:0 auto;padding:15px 0 0;max-width:1080px;}
@media (min-width: 768px) {
    #main-content-container{padding:15px 0;}
}
#main-content-container .row {
    display: flex;
    align-items: flex-start; /* ÂûÇÁõ¥È°∂ÈÉ®ÂØπÈΩê */
    flex-wrap: nowrap;       /* ‚úÖ Á¶ÅÊ≠¢Êç¢Ë°å */
}
#main-content-container .col-avatar{
    flex: 0 0 auto;           /* ‚úÖ Âõ∫ÂÆöÂÆΩÂ∫¶Ôºå‰∏çÊî∂Áº© */
    margin-right: 30px;       /* ÂèØÈÄâÁöÑÂè≥‰æßÁ©∫Èöô */
}

@media (min-width: 768px) {
    #main-content-container .col-avatar{text-align:center}
}
#main-content-container .col-avatar .avatar{z-index:100;    width: 280px;             /* ‰Ω†ÊÉ≥Ë¶ÅÁöÑÊñ∞Â§¥ÂÉèÂÆΩÂ∫¶ */
    margin-top:0px;border-radius:10%;box-shadow:#ccc;opacity:1;}
.col-sm-12.col-md-9 {
        flex: 1 1 auto;           /* ‚úÖ Âè≥‰æß‰ø°ÊÅØËá™ÈÄÇÂ∫îÂÆΩÂ∫¶ */
    min-width: 0;             /* Èò≤Ê≠¢Ê∫¢Âá∫ÂØºËá¥Êç¢Ë°å */
}

#main-content-container .col-info{height:100%;align-items:center;}
#main-info-container{padding-top:15px}
#main-info-container .col-name{text-align:center;margin-top:30px}
@media (min-width: 768px) {
    #main-info-container .col-name{text-align:left;margin-top:0;}
}

/*original subtitle color:#566c7f;*/

#main-info-container .col-name .text{text-align:left}
#main-info-container .col-name .name{margin:0;color:#CC0033;font-size:2em;font-family:'Georgia', Times, serif}
#main-info-container .col-name .email{color:#666; font-size:16px}
#main-info-container .col-link{text-align:center;margin:-5px 0 -25px;}
#main-info-container .col-link ul {margin:0px auto auto;padding:0;list-style:none;text-align:center}
#main-info-container .col-link li {display:inline-block;margin:auto;padding:0 10px;color:#ccc;line-height:10px}
#main-info-container .col-link li a{width:45px;height:45px;color:#ccc;padding:0;font-size:45px;line-height:45px}
#main-info-container .col-link li a:focus,
#main-info-container .col-link li a:hover{text-decoration:none;cursor:hand}
#main-info-container .col-link li a.border{border:1px solid #ccc;border-radius:100%;}
#main-info-container .col-link li a.padding{padding:0px 0px;font-size:22px}

/* Other */
.main-more-container{width:100%;}

.main-bio-container{margin:auto;padding: 0 0em;max-width:1080px;text-align:left;padding-top:30px;max-width:1080px;font-size:1rem;line-height:1.4}

.main-bio-container .subtitle{margin-top:0px;color:#2b3c4b;}

.main-experience-container{width:100%;text-align:left;}
.main-experience-container .subtitle{margin-top:0px;color:#2b3c4b;}

#main-pub-container{margin:auto;padding: 0 0em;max-width:1080px;text-align:left;padding-top:30px;max-width:1080px}
#main-pub-container .subtitle{color:#2b3c4b;}
#main-pub-container .subtitle a {font-size:18px; color: #96a5b3; font-weight:400}
#main-pub-container .subtitle a.activated {color:#333333; font-weight:600}
#main-pub-container .subtitle a.activated:focus,
#main-pub-container .subtitle a.activated:hover {text-decoration:none;cursor:initial}

#main-pub-container .subtitle-aux {font-size:1rem}
#main-pub-container .subtitle-aux a.activated {color:#333333}
#main-pub-container .subtitle-aux a.activated:focus,
#main-pub-container .subtitle-aux a.activated:hover {text-decoration:none;cursor:initial}
#main-pub-container .subtitle-aux .note{margin-left:1em;color:#999999;text-decoration:none;font-size:14px}

#main-pub-card-container{}
#main-pub-card-container>h5{margin-bottom: 20px}
#main-pub-card-container .pub-card{width: 100%;padding-bottom:15px;font-size:1rem}
#main-pub-card-container .pub-card .col-l{text-align:center;padding-top:10px}
#main-pub-card-container .pub-card .col-r{padding-top:10px}
#main-pub-card-container .pub-card img{width:100%;margin:0 auto}
#main-pub-card-container .pub-card-body{width:100%;background:transparent;padding-left:0px}
#main-pub-card-container .pub-card .title{font-weight:600;font-size:1rem;margin-bottom:4px;line-height:1.4}
#main-pub-card-container .pub-card .authors{font-weight:400;color:#666666;margin-bottom:4px;line-height:1.4}
#main-pub-card-container .pub-card .authors a{color:#666666}
#main-pub-card-container .pub-card .authors u{color:#333333;font-weight:600;text-decoration:none}
#main-pub-card-container .pub-card .conference{color:cornflowerblue;font-weight:600}
#main-pub-card-container .pub-card .note{display:block;color:#999999;text-decoration:none;font-size:14px}
#main-pub-card-container .pub-card .info{margin-bottom:0;}
#main-pub-card-container .row{margin:0}
#main-pub-card-container .col-l,
#main-pub-card-container .col-r{vertical-align:top;display:inline-block;margin:0;padding-left:0px}

#footer{padding:0 0 1.5em;margin-top:2rem;min-width:240px;background:#fff;font-size:14px;line-height:12px;text-align:left;background:#fff}
#footer .container{max-width:540px;padding:0 45px;position:relative}
#footer .row{align-items:center}
#footer .comic{padding-right:15px;}
#footer .stat{width:200px;overflow:hidden;margin:0 auto -25px;padding-right:15px;}
#footer .copyright{flex-grow:1;margin:25px auto 5px;text-align:left;display:block;font-size:1rem;line-height:1.4;color:#666666}
#footer a{color:#666666}
#footer a:hover{color:#333333}

.bold{font-weight:600}
.highlight{color:#BB2222;font-weight:600}
.highlight:hover{color:#BB2222;font-weight:600}
.hide{display:none}



.news-list{
    list-style:none;          /* remove bullets           */
    margin:0;                 /* no outer spacing          */
    padding:0;                /* no inner spacing          */
    max-height:340px;         /* ‚âà 10 items ‚Äì tweak at will*/
    overflow-y:auto;          /* vertical scrollbar        */
    border:1px solid #e6e6e6; /* subtle outline            */
    border-radius:6px;
    box-shadow:0 2px 6px rgba(0,0,0,.05);
    background:#fff;
    scroll-behavior:smooth;   /* nicer scrolling feel      */
}

/* row‚Äëseparators and nicer typography */
.news-list li{
    padding:8px 12px;
    border-bottom:1px solid #f4f4f4;
    font-size:15px;
    line-height:1.4;
}
.news-list li:last-child{border-bottom:none}

/* custom thin scrollbar (Chrome/Edge/Safari) */
.news-list::-webkit-scrollbar{width:6px}
.news-list::-webkit-scrollbar-track{background:#fafafa}
.news-list::-webkit-scrollbar-thumb{
    background:#c4c4c4;
    border-radius:3px;
}

    </style>
</head>

<body>

<!--img src="static/img/hal-gatewood.jpg" id="background" class="" /-->

<div id="main">
    <!--canvas id="wave-canvas"></canvas-->

    <div class="main-content">
        <div id="main-content-container" class="container">
            <div class="row">
                <div class="col-avatar">
                    <img src="static/image/personal/Profile picture(square).jpg" class="avatar"/>
                    <figcaption style="font-size: small;">Game night with my family</figcaption>
                    <figcaption style="font-size: small;">üìçPiscataway, New Jersey</figcaption>
                </div>
                <div class="col-sm-12 col-md-9">
                    <div id="main-info-container">
                            <div class="col-name">
                                <h1 class="name">
                                    <span>Zihan Chen ÈôàÂ≠êÊ∂µ</span>  
                                    <span style="font-size: medium;">/ziÀêÀàh…ëÀên/ ; /t É…õn/</span>
                                  </h1> 
                                  
                                  <h1 class="email">Email: zihan.chen.cs [at] rutgers [dot] edu</h1>
                                  
                                  <p class="text">Office: CoRE 624, 96 Frelinghuysen Road, Piscataway, NJ 08854</p>
                                  
                                  <p class="text">
                                    I am a Ph.D. student in Computer Science at 
                                    <img src="static/image/logos/RUTGERS_V_RED_BLACK_RGB.png" alt="Rutgers Logo" style="vertical-align: middle; width: 20px; height: auto;">
                                    <b><a href="https://www.rutgers.edu/">Rutgers University</a></b>, advised by <b><a href="https://people.cs.rutgers.edu/~zz124/">Prof. Eddy Z. Zhang</a></b>. 
                                    I have obtained my M.Sc. in Computer Science from <i>Rutgers University</i>, and my B.E. in Telecommunication Engineering from <img src="static/image/logos/nuist.jpg" alt="nuist Logo" style="vertical-align: middle; width: 20px; height: auto;"> <i>Nanjing University of Information Science & Technology</i> (<b>Changwang School of Honors</b>), through a joint program with <img src="static/image/logos/ucas.png" alt="ucas Logo" style="vertical-align: middle; width: 20px; height: auto;"> <i>University of Chinese Academy of Sciences</i>.
                                  </p>
                                  
                            </div>

                            <div class="col-name">
                            <i style="font-size:22px" class="fa">&#xf1a0;</i>
                            <a href="https://scholar.google.com/citations?user=PogkoyUAAAAJ&hl=en">[Google Scholar]</a>
                            <i style="font-size:24px" class="fa">&#xf08c;</i>
                            <a href="https://www.linkedin.com/in/zihanchenyc/">[LinkedIn]</a>
                            <i style="font-size:24px" class="fa">&#xf09b;</i>
                            <a href="https://github.com/Cesartwothousands">[Github]</a>
                            <i style="font-size:24px" class="fa">&#xf1c1;</i>
                            <a href="static/image/cv/CV251104-A.pdf">[Curriculum Vitae (11/04/2025)]</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="main-more-container">
        <div class="main-bio-container">
            <h3 class="subtitle" style="margin-bottom:0px">Research Interest üí°</h3>
            <p>
                My research interests broadly span <b>Computer Systems</b> topics such as Computer Architecture, Compilers and High-Performance Computing. 
                <br>
                <br>
                Currently, I focus on <b><img src="static/image/logos/quantum.png" alt="Quantum Computing Logo" style="vertical-align: middle; width: 20px; height: auto;"> Quantum Computing</b>‚Äîspecifically quantum computer architecture and applications. I am particularly interested in leveraging techniques from classical architecture, compiler design, and machine learning to improve the programmability, fault tolerance, and scalability of current quantum computers.
                <br>
                <br>
                I am interested in potential research collaboration or internship opportunities. If you have any questions about my work or potential cooperation, please feel free to reach out.
            </p>
                
            <h3 class="subtitle">News üì¢</h3>
            <ul class="news-list">
                <li>
                    <span style="color:#0d5797">[2025.08] </span> I was awarded the <a href="https://sites.google.com/view/qcore25"><u>Q-CORE@QCE'25</u></a> Travel Grant, thanks to StableQ and DCHCQCS!
                </li>
                <li>
                    <span style="color:#0d5797">[2025.07] </span> One poster paper(<u>PhasePoly</u>) has been accepted to QCE'2025! Check our poster (QSYS::1319) <a href="static/image/phasepoly/QCE'25 poster.pdf"><u>here</u></a>. See you in Albuquerque.
                </li>
                <li>
                    <span style="color:#0d5797">[2025.07] </span> We proposed <a href="https://arxiv.org/abs/2506.20624"><u>PhasePoly</u></a>, a compilation optimization framework for quantum circuits.
                </li>
                <li>
                    <span style="color:#0d5797">[2025.06] </span> I will organize and host <a href="#rutgers-qec" id="jump-to-rutgers-qec"><u>Rutgers QEC: Theory and Systems Reading Group</u></a>.
                </li>
                <li>
                    <span style="color:#0d5797">[2025.05] </span> I gave a talk about <a href="#talk-ncsu" id="jump-to-talk-ncsu"><u>Compiler framework on hybrid CV-DV quantum computers for Hamiltonian simulation</u></a> at North Carolina State University CV-DV Group Meeting.
                </li>
                <li>
                    <span style="color:#0d5797">[2025.05] </span> We released <a href="https://github.com/ruadapt/Genesis-CVDV-Compiler"><u>Genesis v1.0.0</u></a>, a compiler framework for Hamiltonian simulation targeting hybrid continuous-variable (CV) and discrete-variable (DV) quantum systems.
                </li>
                <li>
                    <span style="color:#0d5797">[2025.03] </span> One first-author paper(<a href="https://arxiv.org/abs/2505.13683"><u>Genesis</u></a>) has been accepted to ISCA'2025! See you in Tokyo.
                </li>
                <li>
                    <span style="color:#BB2222">[2024.06] </span> I started my Research Assistant role at Rutgers University on Quantum Computing, advised by Professor <a href="https://people.cs.rutgers.edu/~zz124/"><u>Eddy Z. Zhang</u></a>.
                </li>
                <li>
                    <span style="color:#BB2222">[2024.02] </span> I will enroll as a Ph.D. student in Computer Science at Rutgers University starting 2024 Fall.
                </li>
            </ul>
        </div>
    </div>
    
    <div class="main-more-container">
        <div id="main-pub-container">
            <h3 class="subtitle">
            Publications üìö
            (
                <a style="font-size:24px" id="publication-by-selected" href="javascript:;", onClick="publicationBySelected();">show selected</a> /
                <a style="font-size:24px" id="publication-by-date" href="javascript:;", onClick="publicationByDate();">show all by date</a> /
                <a style="font-size:24px" id="publication-by-topic" href="javascript:;", onClick="publicationByTopic();">show all by topic</a>
            )
            </h3>
            <p class="subtitle-aux"><span class="bold">Topics:</span>
                <a href="#topic-Hamiltonian-Simulation" onClick="return publicationByTopicSpecific(this)" data-topic="Hamiltonian-Simulation">QC Programmability</a> /
                <a href="#topic-Circuit-Optimization" onClick="return publicationByTopicSpecific(this)" data-topic="Circuit-Optimization">Circuit Optimization</a> /

                <!--
                <a href="#topic-vision" onClick="return publicationByTopicSpecific(this)" data-topic="vision">Vision</a> /
                <a href="#topic-nlp" onClick="return publicationByTopicSpecific(this)" data-topic="nlp">NLP</a>/
                <a href="#topic-nlp" onClick="return publicationByTopicSpecific(this)" data-topic="robo">Robot Learning</a>/
                <a href="#topic-gm" onClick="return publicationByTopicSpecific(this)" data-topic="gm">GenAI</a>/
                <a href="#topic-xai" onClick="return publicationByTopicSpecific(this)" data-topic="xai">Explainable AI</a> /
                -->

                <span class="note">(*/‚Ä†: indicates equal contribution.)</span>
            </p>
              

            <div id="main-pub-card-container" class="activated hide">
                <div class="pub-card" data-topic="Hamiltonian-Simulation" data-year="2025" data-selected="true">
                    <div class="row">
                        <div class="col-l col-xs-12 col-lg-3">
                            <img src="static/image/genesis/genesis2.jpeg" width="100%" />
                        </div>
                        <div class="col-r col-xs-12 col-lg-9">
                            <div class="pub-card-body">
                                <h5 class="title">Genesis: A Compiler Framework for Hamiltonian Simulation on Hybrid CV-DV Quantum Computers</h5>
                                <h6 class="authors">
                                    <u style="color: #BB2222;">Zihan Chen*</u>,
                                    <a>Jiakang Li*</a>,
                                    <a>Minghao Guo*</a>,
                                    <a>Henry Chen</a>,
                                    <a>Zirui Li</a>,
                                    <a>Joel Bierman</a>,
                                    <a>Yipeng Huang</a>,
                                    <a>Huiyang Zhou</a>,
                                    <a>Yuan Liu</a>,
                                    <a>Eddy Z. Zhang</a>
                                </h6>
                                <p class="info">
                                    <a href="https://dl.acm.org/doi/full/10.1145/3695053.3731065" class="conference" style="color:green;"> [ISCA'2025] </a>
                                    <a href="https://github.com/ruadapt/Genesis-CVDV-Compiler" class="conference" style="color:rgb(242, 0, 255);"> [Software] </a>
                                    <a href="static/image/genesis/Genesis_ISCA2025_presentation_slide.pdf" class="conference"> [Slides] </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div> 

                <div class="pub-card" data-topic="Circuit-Optimization" data-year="2025" data-selected="true">
                    <div class="row">
                        <div class="col-l col-xs-12 col-lg-3">
                            <img src="static/image/phasepoly/phasepoly_highlevel.png" width="100%" />
                        </div>
                        <div class="col-r col-xs-12 col-lg-9">
                            <div class="pub-card-body">
                                <h5 class="title">PhasePoly: An Optimization Framework for Phase Polynomials in Quantum Circuits</h5>
                                <h6 class="authors">
                                    <u style="color: #BB2222;">Zihan Chen</u>,
                                    <a>Henry Chen</a>,
                                    <a>Yuwei Jin</a>,
                                    <a>Minghao Guo</a>,
                                    <a>Enhyeok Jang</a>,
                                    <a>Jiakang Li</a>,
                                    <a>Caitlin Chan</a>,
                                    <a>Won Woo Ro</a>,
                                    <a>Eddy Z. Zhang</a>
                                </h6>
                                <p class="info">
                                    <a href="static/image/phasepoly/QCE'25 poster.pdf" class="conference"> [QCE'25 Poster] </a>
                                    <a href="https://arxiv.org/abs/2506.20624" class="conference" style="color:green;"> [Arxiv] </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
    </div>

    <div class="main-container">
        <div class="main-bio-container">

            <h3 class="subtitle" style="margin-top:0px">Talks and Presentations üé§</h3>
                
            <ul>
                <li>
                    <h5 style="color:#0d5797" id="talk-ncsu">
                        [Talk] Compiler framework on hybrid CV-DV quantum computers for Hamiltonian simulation.
                    </h5>
                    <p>
                        <b>North Carolina State University CV-DV Group Meeting</b>. Remote, May 21, 2025.
                        <b><a href="static/image/genesis/Genesis_NCSU_presentation_slide.pdf"> [Slides] </a></b>
                    </p>
                </li>
            </ul>

            <h3 class="subtitle" style="margin-top:30px">Academic Service üßæ</h3>
            
            <h5 style="color:#BB2222" id="rutgers-qec" >
                Organizer of <b>Rutgers QEC: Theory and Systems Reading Group</b>
            </h5>
            <p>
                Weekly reading group on tutorial and papers related to Quantum Error Correction (QEC). Topics span from theoretical QEC, quantum compiler design optimized for QEC, to AI-driven approaches for QEC. There will be one presenter each week, followed by group discussion and Q&A. Hosted 26 invited talks by 17 speakers from 7 different academic institutions (as of Dec 2025). <a href="https://docs.google.com/forms/d/1M5vxh6AXxCAJ2XjO7PVM6vkFSzjtf4FDulSUPA1toL4/edit"><b><u>Join us!</u></b></a>
            </p>

            <h5 style="color:#BB2222">
                Journal Reviewer:
            </h5>
            <ul>
                <li>ACM Transactions on Quantum Computing</li>
            </ul>

            <h5 style="color:#BB2222">
            Technical Papers Program Committee:
            </h5>
            <ul>
                <li>QCE@25</li> <!-- https://qce.quantum.ieee.org/2025/committees/technical-papers-program-committee/ -->
            </ul>

            <h5 style="color:#BB2222">Artifact Evaluation Committee:</h5>
            <ul>
                <li>SOSP@25</li>
                <li>MICRO@25</li>
            </ul>

            <h3 class="subtitle" style="margin-top:30px">Work Experience üíº</h3>
            <ul>
                <li>
                    <h5>
                        Software Engineer Intern, <b>CARINA AI</b>
                    </h5>
                    <p>
                        May 2023 - May 2024
                        <br>
                        Developed a radiology AI solution and integrated Large Language Models (LLM) into healthcare applications. These products are now deployed in leading hospitals and research institutions globally, with some commercially available and others still in the experimental phase.
                    </p>
                </li>
                <li>
                    <h5>
                        Teaching Assistant, <b>Rutgers University</b>
                    </h5>
                    <p>
                        Sep 2023 - Present
                    </p>
                        <ul>
                            <li>
                                CS336: Principles of Information and Data Management (<b>5 times</b>)
                            </li>
                            <li>
                                ECE568: Software Engineering of Web Applications (<b>1 time</b>)
                            </li>
                            <li>
                                ECE518: Mobile Embedded Systems and On-Device AI (<b>1 time</b>)
                            </li>
                        </ul>

                </li>
            </ul>
        </div>
    </div>

</div>


<div id="footer">
    <div class="container">
        <div class="row">
            <div class="copyright">
                &copy; Zihan Chen, template from <a href="https://jiayuanm.com/">[1<a>, <a href="https://xavihart.github.io/">2]<a>
            </div>
            <div class="stat">
                <script type="text/javascript" id="clustrmaps" src="//clustrmaps.com/map_v2.js?d=eVHWhkyNlETNBv96AdO5ay07eHhqZtn_-Tn8FNL6Ls0&cl=ffffff&w=a"></script>
            </div>
        </div>
    </div>
</div>


<!-- jQuery first, then Tether, then Bootstrap JS. -->
<script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<script type="text/javascript" src="static/js/jquery.color.min.js"></script>
<!--script type="text/javascript" src="static/js/wave.js"></script-->
<script type="text/javascript">

$.fn.isInViewport = function() {
    var elementTop = $(this).offset().top;
    var elementBottom = elementTop + $(this).xouterHeight();
    var viewportTop = $(window).scrollTop();
    var viewportBottom = viewportTop + $(window).height();
    return elementBottom > viewportTop && elementTop < viewportBottom;
};

var allPublications = null;

function publicationBySelected() {
    var a = $("#publication-by-selected")
    if (a.hasClass("activated")) {
        return ;
    }

    $("#main-pub-container .subtitle a").removeClass("activated");
    $("#main-pub-container .subtitle-aux a").removeClass("activated");
    a.addClass("activated");

    $("#main-pub-card-container").html("");
    for (var pubId = 0; pubId < allPublications.length; pubId++) {
        var pub = $(allPublications[pubId]);
        if (pub.data("selected") == true) {
            $("#main-pub-card-container").append(pub);
        }
    }
}

function publicationByDate() {
    var a = $("#publication-by-date")
    if (a.hasClass("activated")) {
        return ;
    }

    $("#main-pub-container .subtitle a").removeClass("activated");
    $("#main-pub-container .subtitle-aux a").removeClass("activated");
    a.addClass("activated");

    $("#main-pub-card-container").html("");
    for (var pubId = 0; pubId < allPublications.length; pubId++) {
        if (pubId == 0 || $(allPublications[pubId-1]).data("year") != $(allPublications[pubId]).data("year")) {
            var year = $(allPublications[pubId]).data("year");
            $("#main-pub-card-container").append($("<h5 id='year-" + year.toString() + "'>" + year.toString() + "</h5>"));
        }
        $("#main-pub-card-container").append(allPublications[pubId]);
    }
}

function publicationByTopicInner() {
    var a = $("#publication-by-topic")
    if (a.hasClass("activated")) {
        return ;
    }
    $("#main-pub-container .subtitle a").removeClass("activated");
    a.addClass("activated");

    $("#main-pub-card-container").html("");
    for (var topicId in allTopics) {
        var topic = allTopics[topicId].name;
        var topicTitle = allTopics[topicId].title;
        // var topicTitle = topic.split("-").map(function (a) { return a[0].toUpperCase() + a.substr(1).toLowerCase(); }).join(" ");
        $("#main-pub-card-container").append($("<h5 id='topic-" + topic + "'>" + topicTitle + "</h5>"));
        for (var pubId = 0; pubId < allPublications.length; pubId++) {
            var pub = $(allPublications[pubId]);
            if (pub.data("topic").indexOf(topic) != -1) {
                $("#main-pub-card-container").append(pub);
            }
        }
    }
}

function publicationByTopicSpecificInner(a) {
    if ($(a).hasClass("activated")) {
        return false;
    }

    $("#main-pub-container .subtitle-aux a").removeClass("activated");
    $(a).addClass("activated");
}

function publicationByTopic() {
    publicationByTopicInner();
    publicationByTopicSpecificInner($("#main-pub-container .subtitle-aux a:first"));
    return true;
}

function publicationByTopicSpecific(a) {
    publicationByTopicInner();
    publicationByTopicSpecificInner(a);

    var hash = a.hash;
    $(hash).prop('id', hash.substr(1) + '-noscroll');
    window.location.hash = hash;
    $(hash + '-noscroll').prop('id', hash.substr(1));

    if (!$(hash).isInViewport()) {
        $('html, body').animate({
            scrollTop: $(hash).offset().top
        }, 1000, function(){
        });
    }

    return false;
}

$(function() {
    getRealSize = function(bgImg) {
        var img = new Image();
        img.src = bgImg.attr("src");
        var width = img.width,
            height = img.height;
        return {
            width: width,
            height: height
        }
    };

    getRealWindowSize = function() {
        var winWidth = null,
            winHeight = null;
        if (window.innerWidth) winWidth = window.innerWidth;
        else if ((document.body) && (document.body.clientWidth)) winWidth = document.body.clientWidth;
        if (window.innerHeight) winHeight = window.innerHeight;
        else if ((document.body) && (document.body.clientHeight)) winHeight = document.body.clientHeight;
        if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
            winHeight = document.documentElement.clientHeight;
            winWidth = document.documentElement.clientWidth
        }
        return {
            width: winWidth,
            height: winHeight
        }
    };

    fullBg = function() {
        var bgImg = $("#background");
        var mainContainer = $("#main");
        var firstFire = null;

        if (bgImg.length == 0) {
            return ;
        }

        function resizeImg() {
            var realSize = getRealSize(bgImg);
            var imgWidth = realSize.width;
            var imgHeight = realSize.height;

            if (imgWidth == 0 || imgHeight == 0) {
                setTimeout(function() {
                    resizeImg();
                }, 200);
            }

            console.log(realSize);
            var realWinSize = getRealWindowSize();
            var winWidth = realWinSize.width;
            var winHeight = realWinSize.height;
            var widthRatio = winWidth / imgWidth;
            var heightRatio = winHeight / imgHeight;
            console.log(realWinSize);
            if (widthRatio > heightRatio) {
                bgImg.width(imgWidth * widthRatio + 'px').height(imgHeight * widthRatio + 'px').css({'top':
                    -(imgHeight * widthRatio - winHeight) / 10 * 5 + 'px', 'left': '0'})
            } else {
                bgImg.width(imgWidth * heightRatio + 'px').height(imgHeight * heightRatio + 'px').css({'left':
                    -(imgWidth * heightRatio - winWidth) / 10 * 3 + 'px', 'top': '0'})
            }
            // mainContainer.css({
            //     width: winWidth,
            //     height: winHeight
            // });
        }

        resizeImg();
        window.onresize = function() {
            if (firstFire === null) {
                firstFire = setTimeout(function() {
                    resizeImg();
                    firstFire = null
                }, 100)
            }
        }
    };

    targetColor = $("#main-content-container .name").css("color");
    animatedLink = function(speed) {
        $("#main-content-container .col-link li").hover(function() {
            $(this).find('.icon').animate({
                color: targetColor,
                borderColor: targetColor
            }, speed);
            $(this).find('.caption').animate({
                color: targetColor
            })
        }, function() {
            $(this).find('.icon').animate({
                borderColor: '#cccccc',
                color: '#cccccc'
            }, speed);
            $(this).find('.caption').animate({
                color: '#cccccc'
            })
        })
    };

    // fullBg();
    animatedLink(400);

    allPublications = $("#main-pub-card-container .pub-card");
    allTopicsLink = $("#main-pub-container .subtitle-aux a");
    allTopics = [];
    for (var topicId = 0; topicId < allTopicsLink.length; topicId++) {
        allTopics.push({name: $(allTopicsLink[topicId]).data("topic"), title: $(allTopicsLink[topicId]).html()});
    }

    $("#publication-by-selected").click();
    // $("#publication-by-date").click();
    $("#main-pub-card-container").removeClass("hide");
});

document.addEventListener('keydown', function(event) {
    // ËøôÈáå‰ª• J ÈîÆ‰∏∫‰æãÔºàkey ‰∏∫Â∞èÂÜô jÔºâ
    if (event.key === 'j' || event.key === 'J') {
        var target = document.getElementById('rutgers-qec');
        if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
        }
    }
});
</script>
</body>
</html>
